<!Doctype html>
<html>
        <head>
                <title>Quiz</title>
                
                <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="vvv==" crossorigin="anonymous"/>
                <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="nnn" crossorigin="anonymous"></script>
               
        </head>
        <body>

                <div class="container mt-5">
                        <h5 class="card-text float-right font-weight-bold">Total Time : <br>(00: <span id="time">00</span>)</h5>

                        <!--first page-->
                        <div class="row d-flex justify-content-center">
                                <div class="col-md-8 border p-4">
                                        <div class="card-body">
                                                <h5 class="card-text float-right font-weight-bold">Quiz</h5>
                                                <h5>(<span id="number">0</span> of 5)</h5>
                                        </div>
                                        <hr>

                                        <div class="start_page">
                                                <h3 class="text-center mb-5">HTML & CSS Basics</h3>
                                                <p>You will get 5 points for each correct answer, At the end of the Quiz, your total score will be displayed. Maximum score is 25.</p>
                                                <button class=" btn btn-primary d-flex mx-auto mt-4" id="btn"><h5>Start the Quiz</h5></button>
                                        </div>
                                        <!--quiz page-->

                                        <div id="main">
                                                <div class="card-body">
                                                        <h5 class="card-text font-weight-bold" id="question"></h5>
                                                </div>

                                                <div class="col-md-12 p-4" id="options">
                                                        <button class="btn btn-block btn-outline-primary text-left option" id="option1"></button>
                                                        <button class="btn btn-block btn-outline-primary text-left option" id="option2"></button>
                                                        <button class="btn btn-block btn-outline-primary text-left option" id="option3"></button>
                                                        <button class="btn btn-block btn-outline-primary text-left option" id="option4"></button>
                                                        <div class="footer p-4">
                                                                <button class="btn btn-primary float-left" id="prev">Previous</button>
                                                                <button class="btn btn-primary float-right" id="next">Next</button>
                                                        </div>
                                                </div>

                                                <div class="d-flex justify-content-center">
                                                        <button class="btn btn-primary btn-lg mx-auto" id="finish">Finish</button>
                                                </div>





                                        </div>

                                        <!--result page-->

                                        <div id="Result">
                                                <h3 class="mt-5 display-4">Marks: <span id="marks"></span>/25</h3>
                                                <h3 class="mt-4"><span id="correct-answer">3</span> Correct out of 5</h3>
                                                <h3 class="mt-4">Result : <span id="percentage">100%</span></h3>
                                        </div>


                                </div>
                        </div>
                </div>
               
                


                <script>

                        //Variables

                        var count = 0;
                        var time = 30;
                        var marks= 0;
                        var answer=[];
                        var timer;

                        //Main ready function

                        $(document).ready(function(){
                                $('#finish').hide();
                                $('#Result').hide();

                                buttons_manager();

                                //Create Function

                                function buttons_manager(){
                                        if(count > 0){
                                                $('#prev').show();
                                                if(count == 4){
                                                        $('#next').hide();
                                                        $('#finish').show();
                                                }
                                                else{
                                                        $('#next').show();

                                                }
                                        }
                                        else{
                                                $('#prev').hide();
                                        }
                                }

                                //Create question function

                                function adding_Questions(data,i){
                                        console.log(data[i].option1);
                                        $('#question').text(data[i].Quiz)
                                        $('#option1').text(data[i].option1)
                                        $('#option2').text(data[i].option2)
                                        $('#option3').text(data[i].option3)
                                        $('#option4').text(data[i].option4)
                                        $('#number').text(Number(i+1));
                                        

                                }

                                //Answer Selction function

                                function selected_Answer(){
                                        for(var i=0; i<4; i++){
                                                var a = document.getElementById("options").children;
                                                if(a[i].innerHTML == answer[count]){
                                                        $("#options").children("button")[i].classList.add("active");
                                                }
                                                else{
                                                        $("#options").children("button")[i].classList.remove("active");
                                                }
                                        }
                                }
                                function creating_result(data){
                                        for(var i=0; i < answer.length; i++){
                                                marks +=5;
                                        }
                                        $('#main').hide();


                                        $("#marks").text(marks);
                                        $("#correct-answer").text(marks / 5);
                                        $('#correct-answer').text((marks / 25)*100 + "%");

                                        $("#Result").show();
     
                                }


                                $("#options").hide();

                                //Attach API

                                fetch("data.json")
                                .then(function(response){
                                        return response.json();
                                })
                                .then(function(data){
                                        $('#btn').click(function(){
                                                $('#options').show();
                                                adding_Questions(data.Questions, count);
                                                $('.start_page').hide();
                                                $('#prev').hide();

                                                timer = setInterval(timer_function , 1000);
                                                function timer_function(){
                                                        $('#time').text(time);
                                                        if(time<1){
                                                        clearInterval(timer);
                                                        alert("Out of time");
                                                        creating_result(data);
                                                        $('#main').hide();
                                                        $('#result').show();
                                                }
                                                time--;
                                        }
                                

                                });
                                        //select option

                                        $(".option").click(function (){
                                                $(this).addClass("active");
                                                $(this).siblings().removeClass("active");
                                                answer[count] = $(this).html();
                                        });

                                        //next question

                                        $('#next').click(function(){
                                                console.log(count,answer.length)
                                                if(count > answer.length -1){
                                                        alert("Select Atleast 1 Option")
                                                }
                                                else{
                                                        count++;
                                                        adding_Questions(data.Questions, count);
                                                        $("#prev").show();
                                                        $(".options").removeClass("active");
                                                        buttons_manager();
                                                        selected_Answer();
                                                }
                                        });

                                        //Previous answer
                                        
                                                $('#prev').click(function(){
                                                        count--;
                                                        adding_Questions(data.Questions, count);
                                                        buttons_manager();
                                                        selected_Answer();

                                                });

                                                // finish quiz

                                                $("#finish").click(function(){
                                                        if(count > answer.lenght -1){
                                                        alert("Select Atleast Option");
                                                }
                                                else{
                                                        creating_result(data);
                                                        clearInterval(timer);

                                                }

                                        });
                                        
                                
                                })


                        });
                         </script>

                   

                

                <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" crossorigin="anonymous"></script>
                <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js" integrity="nnn" crossorigin="anonymous"></script>



        </body>
</html>

